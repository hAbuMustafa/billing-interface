:root {
  color-scheme: light dark;

  --main-bg-light: #fff;
  --main-bg-dark: #1a202c;

  --main-text-light: black;
  --main-text-dark: hsl(120, 20%, 80%);

  --main-bg-color: light-dark(var(--main-bg-light), var(--main-bg-dark));
  --main-text-color: light-dark(var(--main-text-light), var(--main-text-dark));
  --main-accent-color: light-dark(
    hsl(from royalblue h 100% 65%),
    hsl(from royalblue h 100% 55%)
  );
  --main-unselected-accent-color: lightslategray;
}

body {
  background-color: var(--main-bg-color);
  color: var(--main-text-color);
}

main > form {
  width: clamp(500px, 50vw, 600px);
  padding: 2rem;

  border-radius: 0.25rem;
  border: 1px solid light-dark(#333, #ccc);

  box-shadow: black 10px 10px 10px;

  fieldset {
    padding-block: 1rem;

    border-color: light-dark(#333, #ccc);
    border-radius: 0.25rem;
  }
}

:not([type='radio']):not([type='checkbox']) + label {
  margin-block: 1rem 0.25rem;

  &:first-of-type {
    -webkit-margin-before: 0;
    margin-block-start: 0;
  }
}

input {
  direction: rtl;
  position: relative;
  border-radius: 4px;
  border: 1px solid light-dark(#333, #ccc);

  text-align: center;
}

input:user-invalid,
input.unequal {
  border-color: light-dark(maroon, salmon);
  background-color: light-dark(hsl(from salmon h s 80%), hsl(from salmon h s 20%));
}

input:user-valid,
input.equal {
  border-color: light-dark(#008080, green);
  background-color: light-dark(hsl(from green h s 80%), hsl(from green h s 20%));
}

:is(
    label:has(+ input:required:not([type='radio']):not([type='checkbox'])),
    label:has(+ div input:required:not([type='radio']):not([type='checkbox'])),
    label:has(+ select:required),
    :not(fieldset) > fieldset:has(:required) > legend
  )::after {
  content: '*';

  -webkit-margin-start: 0.25rem;

  margin-inline-start: 0.25rem;
  color: red;
}

.locked {
  position: relative;

  &::before {
    content: 'ðŸ”’';

    position: absolute;
    inset-inline-end: 100%;
    -webkit-margin-end: 0.25rem;
    margin-inline-end: 0.25rem;
  }
}

input:is([type='submit'], [type='button']) {
  background-color: var(--main-accent-color);
  color: #ccc;

  font-weight: 700;
  font-size: 1.25rem;

  height: 100%;

  &:is(:hover, :focus) {
    background-color: hsl(from var(--main-accent-color) h s 60%);
  }

  &:is(:active) {
    background-color: hsl(from var(--main-accent-color) h s 50%);
  }
}

:is(input[type='radio'], input[type='checkbox']) {
  display: none;

  & + label {
    background-color: var(--main-unselected-accent-color);
    color: var(--main-bg-color);
    padding: 0.25rem 0.5rem;
    text-align: center;
    text-wrap: nowrap;

    border-radius: 0.25rem;
  }

  &:checked + label {
    background-color: var(--main-accent-color);
    font-weight: 700;
    color: light-dark(var(--main-bg-color), var(--main-text-color));
  }

  &:read-only + label {
    background-color: light-dark(
      hsl(from var(--main-unselected-accent-color) h 20% 80%),
      hsl(from var(--main-unselected-accent-color) h 5% 35%)
    );
  }

  &:checked:read-only + label {
    background-color: light-dark(
      hsl(from var(--main-accent-color) h 80% 80%),
      hsl(from var(--main-accent-color) h 60% l)
    );
  }
}

input:read-only,
input:is([type='radio'], [type='checkbox']):disabled + label {
  opacity: 0.5;
}
